<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Пара классных плагинов для Leiningen</title>
  <meta name="description" content="Далее -- просто несколько полезных плагинов Leiningen для разработки на Clojure">

  <!-- CSS files -->
  <link rel="stylesheet" href="http://clojure.by/css/font-awesome.min.css">
  <link rel="stylesheet" href="http://clojure.by/css/main.css">

  <link rel="canonical" href="http://clojure.by/articles/2016-08/lein-plugins">
  <link rel="alternate" type="application/rss+xml" title="Clojure Blog" href="http://clojure.by/feed.xml " />

  <!-- Icons -->
  <!-- 16x16 -->
  <link rel="shortcut icon" href="http://clojure.by/favicon.ico">
  <!-- 32x32 -->
  <link rel="shortcut icon" href="http://clojure.by/favicon.png">
</head>


<body>
  <div class="row">
    <div class="col s12 m3">
      <div class="table cover">
        

<div class="cover-card table-cell table-middle">
  
  <img src="http://clojure.by/img/avatar.jpg" alt="" class="avatar">
  
  <a href="http://clojure.by/" class="author_name">Всё о Clojure</a>
  <span class="author_job">и других lisp-ах</span>
  <span class="author_bio mbm">Clojure -- динамически-типизированный язык программирования общего назначения, работающий на JVM. Clojure является диалектом Lisp-а и использует его философию 'код-как-данные', а также механизм макросов. Clojure -- в основном функциональный язык с хорошей поддержкой неизменяемых персистентных структур данных.</span>
  <nav class="nav">
    <ul class="nav-list">
       
      <li class="nav-item">
        <a href="http://clojure.by/archive/">Archive</a>
        <span>/</span>
      </li>
          
      <li class="nav-item">
        <a href="http://clojure.by/categories/">Categories</a>
        <span>/</span>
      </li>
            
      <li class="nav-item">
        <a href="http://clojure.by/tags/">Tags</a>
      </li>
       
    </ul>
  </nav>
  <script type="text/javascript">
  // based on http://stackoverflow.com/a/10300743/280842
  function gen_mail_to_link(hs, subject) {
    var lhs,rhs;
    var p = hs.split('@');
    lhs = p[0];
    rhs = p[1];
    document.write("<a class=\"social-link-item\" target=\"_blank\" href=\"mailto");
    document.write(":" + lhs + "@");
    document.write(rhs + "?subject=" + subject + "\"><i class=\"fa fa-fw fa-envelope\"></i><\/a>");
  }
</script>
<div class="social-links">
  <ul>
    
      <li>
      <script>gen_mail_to_link('d.bushenko@gmail.com', 'Hello from website');</script>
      </li>
    
    
    <li><a href="http://facebook.com/dmitry.bushenko" class="social-link-item" target="_blank"><i class="fa fa-fw fa-facebook"></i></a></li>
    
    <li><a href="http://linkedin.com/in/dmitry-bushenko-58426342" class="social-link-item" target="_blank"><i class="fa fa-fw fa-linkedin"></i></a></li>
    
    
    
    <li><a href="http://github.com/dbushenko" class="social-link-item" target="_blank"><i class="fa fa-fw fa-github"></i></a></li>
    
    
    
    
    
    
    <li><a href="https://youtube.com/user/dbushenko" class="social-link-item" target="_blank"><i class="fa fa-fw fa-youtube"></i></a></li>
    
    
    
    
  </ul>
</div>

</div>

      </div>
    </div>
    <div class="col s12 m9">
      <div class="post-listing">
        <a href="http://clojure.by/" >На главную</a><br/><br/>



<div id="post">
  <header class="post-header">
    <h1 title="Пара классных плагинов для Leiningen">Пара классных плагинов для Leiningen</h1>
    <span class="post-meta">
      <span class="post-date">
        9 AUG 2016
      </span>
      •
      <span class="read-time" title="Estimated read time">
  
  
    2 mins read
  
</span>

    </span>

  </header>

  <article class="post-content">
    <p>В разработке на Clojure я активно пользуюсь различными leiningen-плагинами. На вики leiningen-а ведется <a href="https://github.com/technomancy/leiningen/wiki/Plugins">список доступных плагинов</a>, не полный, конечно, но там всё-таки есть наиболее популярные плагины. Ниже – те из них, которые лично мне здорово помогают в повседневном программировании.</p>

<ul>
  <li>
    <p><a href="https://github.com/xsc/lein-ancient">lein-ancient</a> – самый офигенный плагин в списке. Умеет проверить все зависимости вашего проекта на устаревание. Если найдет устаревший – покажет для него самую свежую версию. Супер-удобная вещь, если хотите иметь в проекте всегда самые свежие библиотеки.</p>
  </li>
  <li>
    <p><a href="https://github.com/weavejester/cljfmt">lein-cljfmt</a> – форматтер. Не только проверяет, насколько ваш код плохо отформатирован, но может и отформатировать его за вас. Совершенно необходимая вещь, если в команде больше одного человека.</p>
  </li>
  <li>
    <p><a href="https://github.com/jonase/kibit">lein-kibit</a> – а это крайне полезная штука для новичков. Ищет способы как переписать ваш код наиболее идиоматичным образом. Например, выдает такие подсказки (заменяет if с двумя ветками на when с одной):</p>
  </li>
</ul>

<figure class="highlight"><pre><code class="language-clojure" data-lang="clojure"><span class="w"> 
</span><span class="n">Consider</span><span class="w"> </span><span class="n">using</span><span class="err">:</span><span class="w">
  </span><span class="p">(</span><span class="nb">when</span><span class="w"> </span><span class="p">(</span><span class="nb">not</span><span class="w"> </span><span class="p">(</span><span class="nb">nil?</span><span class="w"> </span><span class="p">(</span><span class="nf">somefunc</span><span class="p">)))</span><span class="w"> </span><span class="n">my-result</span><span class="p">)</span><span class="w">
</span><span class="n">instead</span><span class="w"> </span><span class="n">of</span><span class="err">:</span><span class="w">
  </span><span class="p">(</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nb">not</span><span class="w"> </span><span class="p">(</span><span class="nb">nil?</span><span class="w"> </span><span class="p">(</span><span class="nf">somefunc</span><span class="p">)))</span><span class="w"> </span><span class="n">my-result</span><span class="w"> </span><span class="n">nil</span><span class="p">)</span></code></pre></figure>

<p>Не все подсказки kibit-а хороши. На мой взгляд, его желание заменить (not (empty? …)) на seq – не совсем правильное. Но в целом, kibit – прекрасный инструмент для поиска неидиоматичного кода.</p>

<ul>
  <li><a href="https://github.com/jonase/eastwood">lein-eastwood</a> – линтер. Ищет проблемы. Мне, например, нашел такое:</li>
</ul>

<figure class="highlight"><pre><code class="language-clojure" data-lang="clojure"><span class="w"> 
</span><span class="p">(</span><span class="nf">ns</span><span class="w"> </span><span class="n">consumer.web</span><span class="w">
  </span><span class="p">(</span><span class="nf">require</span><span class="w"> </span><span class="p">[</span><span class="n">compojure.core</span><span class="w"> </span><span class="no">:refer</span><span class="w"> </span><span class="p">[</span><span class="n">routes</span><span class="w"> </span><span class="n">defroutes</span><span class="w"> </span><span class="n">GET</span><span class="w"> </span><span class="n">PUT</span><span class="w"> </span><span class="n">POST</span><span class="w"> </span><span class="n">DELETE</span><span class="w"> </span><span class="n">ANY</span><span class="p">]]))</span></code></pre></figure>

<p>Здесь при редактировании файла я случайно удалил двоеточие перед словом require. Код вроде скомпилировался, и даже прошли какие-то тесты. Однако, это очевидно ошибка, которую мне обнаружил lein-eastwood.</p>

<ul>
  <li>
    <p><a href="https://github.com/dakrone/lein-bikeshed">lein-bikeshed</a> – проверяет форматирование. Функционала поменьше, чем у lein-cljfmt, например lein-bikeshed не умеет исправлять неверное форматирование. Но зато находит слишком длинные строки и, возможно, что-то еще, что не проверяет lein-cljfmt.</p>
  </li>
  <li>
    <p><a href="https://github.com/itang/lein-checkall">lein-checkall</a> – плагин для ленивых. Последовательно запускает команды “lein check &amp;&amp; lein kibit &amp;&amp; lein eastwood &amp;&amp; lein bikeshed”.</p>
  </li>
  <li>
    <p><a href="https://github.com/gdeer81/lein-marginalia">lein-marginallia</a> – отличный способ сгенерировать документацию по внутренностям проекта. Изначально задумывался как плагин для поддержки “литературного программирования” (literate programming), придуманного Дональдом Кнутом. Не скажу, что он так уж следует идеям Д.Кнута, это, скорее, развитие идеи “литературного программирования” с оглядкой на потребности современного программирования. И да, конечно marginallia слизана с docco.</p>
  </li>
  <li>
    <p><a href="https://github.com/weavejester/codox">lein-codox</a> – это утилита для генерирования документации по API проекта. Документация получается не такая подробная, как у marginallia, но и предназначена она для того, чтобы показать, как использовать библиотеку, а не как она устроена внутри.</p>
  </li>
</ul>

<p>А какими плагинами пользуетесь вы? Пишите в комментах.</p>

  </article>
</div>


<div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
        this.page.url = 'http://clojure.by/articles/2016-08/lein-plugins';
        this.page.identifier = '/articles/2016-08/lein-plugins';
    };
    (function() {
        var d = document, s = d.createElement('script');
        
        s.src = '//clojureblog.disqus.com/embed.js';
        
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>




        <footer>
  &copy; 2017 Всё о Clojure. Powered by <a href="http://jekyllrb.com/">Jekyll</a>, made with secret alien technology</i>
</footer>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-15593919-3', 'auto');
  ga('send', 'pageview');

</script>


      </div>
    </div>
  </div>
  <script type="text/javascript" src="http://clojure.by/js/jquery-2.1.4.min.js"></script>
<script type="text/javascript" src="http://clojure.by/js/main.js"></script>


</body>
</html>
